---
import BaseLayout from "../../layouts/BaseLayout.astro";
import EventCard from "../../components/EventCard.astro";
import EventGridSection from "../../components/EventGridSection.astro";
import { getCollection } from "astro:content";

// Fetch all events
const allEvents = await getCollection("events");

// Sort events by date (latest first)
const sortedEvents = allEvents.sort((a, b) => {
  return new Date(b.data.date).getTime() - new Date(a.data.date).getTime();
});

const placeholderEventsFeatured = [
  {
    title: "Featured Event 1",
    date: "2024-08-01",
    imageUrl: "/images/img-placeholder.jpg",
    linkUrl: "/eventos/event-template",
  },
  {
    title: "Featured Event 2",
    date: "2024-08-05",
    imageUrl: "/images/img-placeholder.jpg",
    linkUrl: "/eventos/event-template",
  },
  {
    title: "Featured Event 3",
    date: "2024-08-10",
    imageUrl: "/images/img-placeholder.jpg",
    linkUrl: "/eventos/event-template",
  },
];

const placeholderEventsLarge = [
  {
    title: "Large Event 1",
    date: "2024-09-01",
    imageUrl: "/images/img-placeholder.jpg",
    linkUrl: "/eventos/event-template",
  },
  {
    title: "Large Event 2",
    date: "2024-09-05",
    imageUrl: "/images/img-placeholder.jpg",
    linkUrl: "/eventos/event-template",
  },
  {
    title: "Large Event 3",
    date: "2024-09-10",
    imageUrl: "/images/img-placeholder.jpg",
    linkUrl: "/eventos/event-template",
  },
];

const placeholderEventsSmall = [
  {
    title: "Small Event 1",
    date: "2024-10-01",
    imageUrl: "/images/img-placeholder.jpg",
    linkUrl: "/eventos/event-template",
  },
  {
    title: "Small Event 2",
    date: "2024-10-02",
    imageUrl: "/images/img-placeholder.jpg",
    linkUrl: "/eventos/event-template",
  },
  {
    title: "Small Event 3",
    date: "2024-10-03",
    imageUrl: "/images/img-placeholder.jpg",
    linkUrl: "/eventos/event-template",
  },
  {
    title: "Small Event 4",
    date: "2024-10-04",
    imageUrl: "/images/img-placeholder.jpg",
    linkUrl: "/eventos/event-template",
  },
  {
    title: "Small Event 5",
    date: "2024-10-05",
    imageUrl: "/images/img-placeholder.jpg",
    linkUrl: "/eventos/event-template",
  },
  {
    title: "Small Event 6",
    date: "2024-10-06",
    imageUrl: "/images/img-placeholder.jpg",
    linkUrl: "/eventos/event-template",
  },
];
---

<BaseLayout
  title="Latest Events"
  description="Explore our upcoming and past events"
>
  <div class="mx-auto">
    <EventGridSection
      title="Featured Events"
      events={placeholderEventsFeatured}
      defaultCardSize="featured"
      useLightBackground={false}
    />
    <EventGridSection
      title="Upcoming Large Events"
      events={placeholderEventsLarge}
      defaultCardSize="large"
      useLightBackground={true}
    />
    <EventGridSection
      title="More Events"
      events={placeholderEventsSmall}
      defaultCardSize="small"
    />
    <EventGridSection
      title="Past Events"
      events={placeholderEventsSmall.slice(0, 3)}
      defaultCardSize="small"
    />
  </div>
</BaseLayout>
